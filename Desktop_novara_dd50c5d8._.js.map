{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lazar/Desktop/novara/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\nexport function createClient() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n  if (!url || !anon) {\n    return null;\n  }\n  return createBrowserClient(url, anon);\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,MAAM;IACN,MAAM;IACN;;IAGA,OAAO,IAAA,sNAAmB,EAAC,KAAK;AAClC","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lazar/Desktop/novara/app/admin/%28main%29/features/FeaturesEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { ChevronUp, ChevronDown, Pencil, Trash2 } from \"lucide-react\";\n\ntype Item = {\n  id: string;\n  title: string;\n  description: string | null;\n  card_type: \"shuffler\" | \"typewriter\" | \"scheduler\";\n  order_index: number;\n  sub_labels: string[];\n  typewriter_messages: string[];\n  scheduler_label: string | null;\n  is_published: boolean;\n};\n\nexport function FeaturesEditor({ items: initial }: { items: Item[] }) {\n  const router = useRouter();\n  const [items, setItems] = useState(initial);\n  const [editing, setEditing] = useState<string | null>(null);\n  const [form, setForm] = useState({\n    title: \"\",\n    description: \"\",\n    card_type: \"shuffler\" as \"shuffler\" | \"typewriter\" | \"scheduler\",\n    sub_labels: \"[]\",\n    typewriter_messages: \"[]\",\n    scheduler_label: \"\",\n  });\n\n  const supabase = createClient();\n  if (!supabase) return <p className=\"text-red-400\">Supabase not configured.</p>;\n\n  function openEdit(item: Item) {\n    setEditing(item.id);\n    setForm({\n      title: item.title,\n      description: item.description ?? \"\",\n      card_type: item.card_type,\n      sub_labels: JSON.stringify(item.sub_labels ?? [], null, 2),\n      typewriter_messages: JSON.stringify(item.typewriter_messages ?? [], null, 2),\n      scheduler_label: item.scheduler_label ?? \"\",\n    });\n  }\n\n  async function saveEdit() {\n    if (!editing) return;\n    let sub: string[] = [];\n    let msg: string[] = [];\n    try {\n      sub = JSON.parse(form.sub_labels);\n    } catch {}\n    try {\n      msg = JSON.parse(form.typewriter_messages);\n    } catch {}\n    await supabase.from(\"features\").update({\n      title: form.title,\n      description: form.description || null,\n      card_type: form.card_type,\n      sub_labels: sub,\n      typewriter_messages: msg,\n      scheduler_label: form.scheduler_label || null,\n    }).eq(\"id\", editing);\n    setItems((prev) => prev.map((p) => (p.id === editing ? { ...p, ...form, sub_labels: sub, typewriter_messages: msg } : p)));\n    setEditing(null);\n    router.refresh();\n  }\n\n  async function move(id: string, dir: number) {\n    const idx = items.findIndex((i) => i.id === id);\n    if (idx === -1 || (dir < 0 && idx === 0) || (dir > 0 && idx === items.length - 1)) return;\n    const newOrder = [...items];\n    const otherIdx = idx + dir;\n    [newOrder[idx], newOrder[otherIdx]] = [newOrder[otherIdx], newOrder[idx]];\n    for (let o = 0; o < newOrder.length; o++) {\n      await supabase.from(\"features\").update({ order_index: o }).eq(\"id\", newOrder[o].id);\n    }\n    setItems(newOrder.map((i, o) => ({ ...i, order_index: o })));\n    router.refresh();\n  }\n\n  async function remove(id: string) {\n    if (!confirm(\"Delete this feature?\")) return;\n    await supabase.from(\"features\").delete().eq(\"id\", id);\n    setItems((prev) => prev.filter((i) => i.id !== id));\n    router.refresh();\n  }\n\n  async function addNew() {\n    const maxOrder = items.length ? Math.max(...items.map((i) => i.order_index)) + 1 : 0;\n    const { data } = await supabase.from(\"features\").insert({\n      title: \"New Feature\",\n      description: \"\",\n      card_type: \"shuffler\",\n      order_index: maxOrder,\n      sub_labels: [],\n      typewriter_messages: [],\n      scheduler_label: null,\n    }).select().single();\n    if (data) {\n      setItems((prev) => [...prev, data as Item]);\n      setEditing((data as Item).id);\n      setForm({\n        title: (data as Item).title,\n        description: \"\",\n        card_type: \"shuffler\",\n        sub_labels: \"[]\",\n        typewriter_messages: \"[]\",\n        scheduler_label: \"\",\n      });\n      router.refresh();\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <button type=\"button\" onClick={addNew} className=\"px-4 py-2 rounded-lg bg-accent text-white text-sm font-medium\">Add feature</button>\n      <ul className=\"space-y-2\">\n        {items.map((item) => (\n          <li key={item.id} className=\"p-4 rounded-xl bg-primary/50 border border-ghost/10\">\n            {editing === item.id ? (\n              <div className=\"space-y-3\">\n                <input\n                  value={form.title}\n                  onChange={(e) => setForm((f) => ({ ...f, title: e.target.value }))}\n                  className=\"w-full px-3 py-2 rounded-lg bg-graphite text-ghost\"\n                  placeholder=\"Title\"\n                />\n                <input\n                  value={form.description}\n                  onChange={(e) => setForm((f) => ({ ...f, description: e.target.value }))}\n                  className=\"w-full px-3 py-2 rounded-lg bg-graphite text-ghost\"\n                  placeholder=\"Description\"\n                />\n                <select\n                  value={form.card_type}\n                  onChange={(e) => setForm((f) => ({ ...f, card_type: e.target.value as Item[\"card_type\"] }))}\n                  className=\"px-3 py-2 rounded-lg bg-graphite text-ghost\"\n                >\n                  <option value=\"shuffler\">Shuffler</option>\n                  <option value=\"typewriter\">Typewriter</option>\n                  <option value=\"scheduler\">Scheduler</option>\n                </select>\n                {(form.card_type === \"shuffler\") && (\n                  <textarea value={form.sub_labels} onChange={(e) => setForm((f) => ({ ...f, sub_labels: e.target.value }))} rows={3} className=\"w-full px-3 py-2 rounded-lg bg-graphite text-ghost font-mono text-sm\" placeholder='[\"A\",\"B\",\"C\"]' />\n                )}\n                {(form.card_type === \"typewriter\") && (\n                  <textarea value={form.typewriter_messages} onChange={(e) => setForm((f) => ({ ...f, typewriter_messages: e.target.value }))} rows={3} className=\"w-full px-3 py-2 rounded-lg bg-graphite text-ghost font-mono text-sm\" placeholder='[\"msg1\",\"msg2\"]' />\n                )}\n                {(form.card_type === \"scheduler\") && (\n                  <input value={form.scheduler_label} onChange={(e) => setForm((f) => ({ ...f, scheduler_label: e.target.value }))} className=\"w-full px-3 py-2 rounded-lg bg-graphite text-ghost\" placeholder=\"Scheduler label\" />\n                )}\n                <div className=\"flex gap-2\">\n                  <button type=\"button\" onClick={saveEdit} className=\"px-3 py-1 rounded bg-accent text-white text-sm\">Save</button>\n                  <button type=\"button\" onClick={() => setEditing(null)} className=\"px-3 py-1 rounded bg-ghost/20 text-ghost text-sm\">Cancel</button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"flex items-center gap-2\">\n                <button type=\"button\" onClick={() => move(item.id, -1)} className=\"p-1 text-ghost/70 hover:text-ghost\"><ChevronUp size={18} /></button>\n                <button type=\"button\" onClick={() => move(item.id, 1)} className=\"p-1 text-ghost/70 hover:text-ghost\"><ChevronDown size={18} /></button>\n                <span className=\"flex-1 font-medium text-ghost\">{item.title}</span>\n                <span className=\"text-ghost/60 text-sm\">{item.card_type}</span>\n                <button type=\"button\" onClick={() => openEdit(item)} className=\"p-1 text-ghost/70 hover:text-ghost\"><Pencil size={16} /></button>\n                <button type=\"button\" onClick={() => remove(item.id)} className=\"p-1 text-red-400 hover:text-red-300\"><Trash2 size={16} /></button>\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}